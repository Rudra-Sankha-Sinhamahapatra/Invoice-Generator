<%- include('../partials/header') %>
<h1>Generate Invoice</h1>
<form action="/api/invoice/generate" method="POST">
    <div>
        <label for="invoiceNo">Invoice No:</label>
        <input type="text" id="invoiceNo" name="invoiceNo" required>
    </div>
    <div>
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>
    </div>
    <div>
        <label for="orderNo">Order No:</label>
        <input type="text" id="orderNo" name="orderNo" required>
    </div>
    
    <h2>Customer Details</h2>
    <div>
        <label for="customerName">Name:</label>
        <input type="text" id="customerName" name="customerDetails[name]" required>
    </div>
    <div>
        <label for="customerAddress">Address:</label>
        <input type="text" id="customerAddress" name="customerDetails[address]" required>
    </div>
    <div>
        <label for="customerGstNo">GST No:</label>
        <input type="text" id="customerGstNo" name="customerDetails[gstNo]">
    </div>
    <div>
        <label for="customerPhoneNo">Phone No:</label>
        <input type="tel" id="customerPhoneNo" name="customerDetails[phoneNo]" required>
    </div>
    <div>
        <label for="customerEmail">Email:</label>
        <input type="email" id="customerEmail" name="customerDetails[email]" required>
    </div>
    
    <h2>Products</h2>
    <div id="products">
        <div class="product">
            <input type="text" name="products[0][description]" placeholder="Description" required>
            <input type="number" name="products[0][quantity]" placeholder="Quantity" required>
            <input type="number" name="products[0][price]" placeholder="Price" step="0.01" required>
            <input type="number" name="products[0][total]" placeholder="Total" step="0.01" required>
        </div>
    </div>
    <button type="button" onclick="addProduct()">Add Product</button>
    
    <button type="submit">Generate Invoice</button>
</form>

<script>
let productCount = 0;

function addProduct() {
    productCount++;
    const productDiv = document.createElement('div');
    productDiv.className = 'product';
    productDiv.innerHTML = `
        <input type="text" name="products[${productCount}][description]" placeholder="Description" required>
        <input type="number" name="products[${productCount}][quantity]" placeholder="Quantity" required>
        <input type="number" name="products[${productCount}][price]" placeholder="Price" step="0.01" required>
        <input type="number" name="products[${productCount}][total]" placeholder="Total" step="0.01" required>
    `;
    document.getElementById('products').appendChild(productDiv);
}
</script>
<%- include('../partials/footer') %>